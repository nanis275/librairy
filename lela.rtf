<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 11px;
        }
        h3 {
            color: MediumSeaGreen;
        }
        p, h5 {
            color: black;
            margin-left: 20px;
        }
        a {
            color: mediumblue;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <h1>Hi,</h1>
    <p>Please see below for the details of releases happening on the EU platform today.</p>

    <h3 style="color:MediumSeaGreen;">We implemented them early today:</h3>
    {% with show_nighthawk_block=False show_blackbird_block=False show_vulcan_block=False show_other_block=False %}
    {% for result_item in result %}
        {% if "08:" in result_item.start_date or "09:" in result_item.start_date or "10:" in result_item.start_date or "11:" in result_item.start_date or "12:" in result_item.start_date or "13:" in result_item.start_date or "14:" in result_item.start_date %}
            {% if result_item.state_display != "Canceled" %}
                {% if "Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description %}
                    {% if not show_nighthawk_block %}
                        <h3>Nighthawk and BlackBird Releases</h3>
                        {% with show_nighthawk_block=True %}
                    {% endif %}
                {% elif "Vulcan" in result_item.short_description %}
                    {% if not show_vulcan_block %}
                        <h3>Vulcan Releases</h3>
                        {% with show_vulcan_block=True %}
                    {% endif %}
                {% else %}
                    {% if not show_other_block %}
                        <h3>Other Releases</h3>
                        {% with show_other_block=True %}
                    {% endif %}
                {% endif %}
                <h5>{{ result_item.short_description }}</h5>
                <p><strong>Justification:</strong> {{ result_item.justification }}</p>
                <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
                <br><br>
            {% endif %}
        {% endif %}
    {% endfor %}
    {% endwith %}

    <h3 style="color:MediumSeaGreen;">We will implement on or after 17:30 LDN time:</h3>
    {% with show_nighthawk_block=False show_blackbird_block=False show_vulcan_block=False show_other_block=False %}
    {% for result_item in result %}
        {% if "15:" in result_item.start_date or "16:" in result_item.start_date or "17:" in result_item.start_date or "18:" in result_item.start_date %}
            {% if result_item.state_display != "Canceled" %}
                {% if "Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description %}
                    {% if not show_nighthawk_block %}
                        <h3>Nighthawk and BlackBird Releases</h3>
                        {% with show_nighthawk_block=True %}
                    {% endif %}
                {% elif "Vulcan" in result_item.short_description %}
                    {% if not show_vulcan_block %}
                        <h3>Vulcan Releases</h3>
                        {% with show_vulcan_block=True %}
                    {% endif %}
                {% else %}
                    {% if not show_other_block %}
                        <h3>Other Releases</h3>
                        {% with show_other_block=True %}
                    {% endif %}
                {% endif %}
                <h5>{{ result_item.short_description }}</h5>
                <p><strong>Justification:</strong> {{ result_item.justification }}</p>
                <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
                <br><br>
            {% endif %}
        {% endif %}
    {% endfor %}
    {% endwith %}
</body>
</html>



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 11px;
        }
        h3 {
            color: MediumSeaGreen;
        }
        p, h5 {
            color: black;
            margin-left: 20px;
        }
        a {
            color: mediumblue;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <h1>Hi,</h1>
    <p>Please see below for the details of releases happening on the EU platform today.</p>

    <h3 style="color:MediumSeaGreen;">We implemented them early today:</h3>
    {% for result_item in result %}
        {% if "08:" in result_item.start_date or "09:" in result_item.start_date or "10:" in result_item.start_date or "11:" in result_item.start_date or "12:" in result_item.start_date or "13:" in result_item.start_date or "14:" in result_item.start_date %}
            {% if result_item.state_display != "Canceled" %}
                {% if "Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description %}
                    <h3>Nighthawk and BlackBird Releases</h3>
                {% elif "Vulcan" in result_item.short_description %}
                    <h3>Vulcan Releases</h3>
                {% else %}
                    <h3>Other Releases</h3>
                {% endif %}
                <h5>{{ result_item.short_description }}</h5>
                <p><strong>Justification:</strong> {{ result_item.justification }}</p>
                <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
                <br><br>
            {% endif %}
        {% endif %}
    {% endfor %}

    <h3 style="color:MediumSeaGreen;">We will implement on or after 17:30 LDN time:</h3>
    {% for result_item in result %}
        {% if "15:" in result_item.start_date or "16:" in result_item.start_date or "17:" in result_item.start_date or "18:" in result_item.start_date %}
            {% if result_item.state_display != "Canceled" %}
                {% if "Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description %}
                    <h3>Nighthawk and BlackBird Releases</h3>
                {% elif "Vulcan" in result_item.short_description %}
                    <h3>Vulcan Releases</h3>
                {% else %}
                    <h3>Other Releases</h3>
                {% endif %}
                <h5>{{ result_item.short_description }}</h5>
                <p><strong>Justification:</strong> {{ result_item.justification }}</p>
                <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
                <br><br>
            {% endif %}
        {% endif %}
    {% endfor %}
</body>
</html>




<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 11px;
        }
        h3 {
            color: MediumSeaGreen;
        }
        p, h5 {
            color: black;
            margin-left: 20px;
        }
        a {
            color: mediumblue;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <h1>Hi,</h1>
    <p>Please see below for the details of releases happening on the EU platform today.</p>

    <!-- Section for Nighthawk and BlackBird Releases -->
    <h3>Nighthawk and BlackBird Releases</h3>
    {% for result_item in result %}
    {% if ("Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description) and result_item.state_display != "Canceled" %}
        <h5>{{ result_item.short_description }}</h5>
        <p><strong>Justification:</strong> {{ result_item.justification }}</p>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
        <br><br>
    {% endif %}
    {% endfor %}

    <!-- Section for Vulcan Releases -->
    <h3>Vulcan Releases</h3>
    {% for result_item in result %}
    {% if "Vulcan" in result_item.short_description and result_item.state_display != "Canceled" %}
        <h5>{{ result_item.short_description }}</h5>
        <p><strong>Justification:</strong> {{ result_item.justification }}</p>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
        <br><br>
    {% endif %}
    {% endfor %}

    <!-- Section for Releases Implemented After 17:30 -->
    <h3>We Will Implemented on or After 17:30 LDN Time</h3>
    {% for result_item in result %}
    {% if result_item.start_date and result_item.state_display != "Canceled" %}
        {% if result_item.start_date|slice(11, 2) >= "17" %}
            <h5>{{ result_item.short_description }}</h5>
            <p><strong>Justification:</strong> {{ result_item.justification }}</p>
            <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
            <br><br>
        {% endif %}
    {% endif %}
    {% endfor %}

    <!-- Section for Other Releases -->
    <h3>Other Releases</h3>
    {% for result_item in result %}
    {% if ("Nighthawk" not in result_item.short_description and "Vulcan" not in result_item.short_description and "BlackBird" not in result_item.short_description) and result_item.state_display != "Canceled" %}
        {% if result_item.start_date and result_item.start_date|slice(11, 2) < "17" %}
            <h5>{{ result_item.short_description }}</h5>
            <p><strong>Justification:</strong> {{ result_item.justification }}</p>
            <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
            <br><br>
        {% endif %}
    {% endif %}
    {% endfor %}
</body>
</html>






<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 11px;
        }
        h3 {
            color: MediumSeaGreen;
        }
        p, h5 {
            color: black;
            margin-left: 20px;
        }
        a {
            color: mediumblue;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <h1>Hi,</h1>
    <p>Please see below for the details of releases happening on the EU platform today.</p>

    <!-- Section for Nighthawk and BlackBird Releases -->
    <h3>Nighthawk and BlackBird Releases</h3>
    {% for result_item in result %}
    {% if ("Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description) and 
          result_item.state_display != "Canceled" %}
        <h5>{{ result_item.short_description }}</h5>
        <p><strong>Justification:</strong> {{ result_item.justification }}</p>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
        <br><br>
    {% endif %}
    {% endfor %}

    <!-- Section for Vulcan Releases -->
    <h3>Vulcan Releases</h3>
    {% for result_item in result %}
    {% if "Vulcan" in result_item.short_description and 
          result_item.state_display != "Canceled" %}
        <h5>{{ result_item.short_description }}</h5>
        <p><strong>Justification:</strong> {{ result_item.justification }}</p>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
        <br><br>
    {% endif %}
    {% endfor %}

    <!-- Section for Releases Implemented After 17:30 -->
    <h3>We Will Implemented on or After 17:30 LDN Time</h3>
    {% for result_item in result %}
    {% if (result_item.start_date | slice(11, 2) in ["15", "16", "17", "18"]) and 
          result_item.state_display != "Canceled" %}
        <h5>{{ result_item.short_description }}</h5>
        <p><strong>Justification:</strong> {{ result_item.justification }}</p>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
        <br><br>
    {% endif %}
    {% endfor %}

    <!-- Section for Other Releases -->
    <h3>Other Releases</h3>
    {% for result_item in result %}
    {% if ("Nighthawk" not in result_item.short_description and "Vulcan" not in result_item.short_description and "BlackBird" not in result_item.short_description) and 
          (result_item.start_date | slice(11, 2) not in ["15", "16", "17", "18"]) and 
          result_item.state_display != "Canceled" %}
        <h5>{{ result_item.short_description }}</h5>
        <p><strong>Justification:</strong> {{ result_item.justification }}</p>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
        <br><br>
    {% endif %}
    {% endfor %}
</body>
</html>




<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 11px;
        }
        h3 {
            color: MediumSeaGreen;
        }
        p, h5 {
            color: black;
            margin-left: 20px;
        }
        a {
            color: mediumblue;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <h1>Hi,</h1>
    <p>Please see below for the details of releases happening on the EU platform today.</p>

    <!-- Section for Nighthawk and BlackBird Releases -->
    <h3>Nighthawk and BlackBird Releases</h3>
    {% for result_item in result %}
    {% if "Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description %}
        <h5>{{ result_item.short_description }}</h5>
        <p><strong>Justification:</strong> {{ result_item.justification }}</p>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
    {% endif %}
    {% endfor %}

    <!-- Section for Vulcan Releases -->
    <h3>Vulcan Releases</h3>
    {% for result_item in result %}
    {% if "Vulcan" in result_item.short_description %}
        <h5>{{ result_item.short_description }}</h5>
        <p><strong>Justification:</strong> {{ result_item.justification }}</p>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
    {% endif %}
    {% endfor %}

    <!-- Section for Other Releases -->
    <h3>Other Releases</h3>
    {% for result_item in result %}
    {% if "Nighthawk" not in result_item.short_description and "BlackBird" not in result_item.short_description and "Vulcan" not in result_item.short_description %}
        <h5>{{ result_item.short_description }}</h5>
        <p><strong>Justification:</strong> {{ result_item.justification }}</p>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
    {% endif %}
    {% endfor %}
</body>
</html>






<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 11px;
        }
        h3 {
            color: MediumSeaGreen;
        }
        p, h5 {
            color: black;
            margin-left: 20px;
        }
        a {
            color: mediumblue;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <h1>Hi,</h1>
    <p>Please see below for the details of releases happening on the EU platform today.</p>

    <!-- Section for Nighthawk and BlackBird Releases -->
    <h3>Nighthawk and BlackBird Releases</h3>
    {% for result_item in result %}
    {% if ("Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description) and result_item.closed_at and result_item.closed_at >= '2024-09-16 17:30:00' %}
        <h5>{{ result_item.short_description }}</h5>
        <p><strong>Justification:</strong> {{ result_item.justification }}</p>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
    {% endif %}
    {% endfor %}

    <!-- Section for Vulcan Releases -->
    <h3>Vulcan Releases</h3>
    {% for result_item in result %}
    {% if "Vulcan" in result_item.short_description and result_item.closed_at and result_item.closed_at >= '2024-09-16 17:30:00' %}
        <h5>{{ result_item.short_description }}</h5>
        <p><strong>Justification:</strong> {{ result_item.justification }}</p>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
    {% endif %}
    {% endfor %}

    <!-- Section for Other Releases -->
    <h3>Other Releases</h3>
    {% for result_item in result %}
    {% if ("Nighthawk" not in result_item.short_description and "BlackBird" not in result_item.short_description and "Vulcan" not in result_item.short_description) and result_item.closed_at and result_item.closed_at >= '2024-09-16 17:30:00' %}
        <h5>{{ result_item.short_description }}</h5>
        <p><strong>Justification:</strong> {{ result_item.justification }}</p>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
    {% endif %}
    {% endfor %}
</body>
</html>







<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {font-family: Arial, sans-serif; font-size: 11px;}
        h3 {color: MediumSeaGreen;}
        p, h5 {color: black; margin-left: 20px;}
        a {color: mediumblue; text-decoration: none;}
    </style>
</head>
<body>
    <h1>Hi,</h1>
    <p>Please see below for the details of releases happening on the EU platform today.</p>

    <h3>Releases Implemented Before 17:30</h3>
    
    <h4>Nighthawk and BlackBird Releases</h4>
    {% for result_item in result %}
        {% if ("Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description) %}
            {% if result_item.closed_at < '2024-09-16 17:30:00' %}
                <h5>{{ result_item.short_description }}</h5>
                <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
            {% endif %}
        {% endif %}
    {% endfor %}

    <h4>Vulcan Releases</h4>
    {% for result_item in result %}
        {% if "Vulcan" in result_item.short_description %}
            {% if result_item.closed_at < '2024-09-16 17:30:00' %}
                <h5>{{ result_item.short_description }}</h5>
                <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
            {% endif %}
        {% endif %}
    {% endfor %}

    <h4>Other Releases</h4>
    {% for result_item in result %}
        {% if ("Nighthawk" not in result_item.short_description and "BlackBird" not in result_item.short_description and "Vulcan" not in result_item.short_description) %}
            {% if result_item.closed_at < '2024-09-16 17:30:00' %}
                <h5>{{ result_item.short_description }}</h5>
                <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
            {% endif %}
        {% endif %}
    {% endfor %}

    <h3>Releases Implemented After 17:30</h3>
    
    <h4>Nighthawk and BlackBird Releases</h4>
    {% for result_item in result %}
        {% if ("Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description) %}
            {% if result_item.closed_at >= '2024-09-16 17:30:00' %}
                <h5>{{ result_item.short_description }}</h5>
                <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
            {% endif %}
        {% endif %}
    {% endfor %}

    <h4>Vulcan Releases</h4>
    {% for result_item in result %}
        {% if "Vulcan" in result_item.short_description %}
            {% if result_item.closed_at >= '2024-09-16 17:30:00' %}
                <h5>{{ result_item.short_description }}</h5>
                <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
            {% endif %}
        {% endif %}
    {% endfor %}

    <h4>Other Releases</h4>
    {% for result_item in result %}
        {% if ("Nighthawk" not in result_item.short_description and "BlackBird" not in result_item.short_description and "Vulcan" not in result_item.short_description) %}
            {% if result_item.closed_at >= '2024-09-16 17:30:00' %}
                <h5>{{ result_item.short_description }}</h5>
                <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
            {% endif %}
        {% endif %}
    {% endfor %}
</body>
</html>


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {font-family: Arial, sans-serif; font-size: 11px;}
        h3 {color: MediumSeaGreen;}
        p, h5 {color: black; margin-left: 20px;}
        a {color: mediumblue; text-decoration: none;}
    </style>
</head>
<body>
    <h1>Hi,</h1>
    <p>Please see below for the details of releases happening on the EU platform today.</p>

    <h3>Releases Implemented Before 17:30</h3>
    <h4>Nighthawk and BlackBird Releases</h4>
    {% for result_item in result %}
        {% if ("Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description) and result_item.closed_at and result_item.closed_at < '2024-09-16 17:30:00' %}
            <h5>{{ result_item.short_description }}</h5>
            <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
        {% endif %}
    {% endfor %}

    <h4>Vulcan Releases</h4>
    {% for result_item in result %}
        {% if "Vulcan" in result_item.short_description and result_item.closed_at and result_item.closed_at < '2024-09-16 17:30:00' %}
            <h5>{{ result_item.short_description }}</h5>
            <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
        {% endif %}
    {% endfor %}

    <h4>Other Releases</h4>
    {% for result_item in result %}
        {% if "Nighthawk" not in result_item.short_description and "BlackBird" not in result_item.short_description and "Vulcan" not in result_item.short_description and result_item.closed_at and result_item.closed_at < '2024-09-16 17:30:00' %}
            <h5>{{ result_item.short_description }}</h5>
            <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
        {% endif %}
    {% endfor %}

    <h3>Releases Implemented After 17:30</h3>
    <h4>Nighthawk and BlackBird Releases</h4>
    {% for result_item in result %}
        {% if ("Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description) and result_item.closed_at and result_item.closed_at >= '2024-09-16 17:30:00' %}
            <h5>{{ result_item.short_description }}</h5>
            <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
        {% endif %}
    {% endfor %}

    <h4>Vulcan Releases</h4>
    {% for result_item in result %}
        {% if "Vulcan" in result_item.short_description and result_item.closed_at and result_item.closed_at >= '2024-09-16 17:30:00' %}
            <h5>{{ result_item.short_description }}</h5>
            <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
        {% endif %}
    {% endfor %}

    <h4>Other Releases</h4>
    {% for result_item in result %}
        {% if "Nighthawk" not in result_item.short_description and "BlackBird" not in result_item.short_description and "Vulcan" not in result_item.short_description and result_item.closed_at and result_item.closed_at >= '2024-09-16 17:30:00' %}
            <h5>{{ result_item.short_description }}</h5>
            <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
        {% endif %}
    {% endfor %}
</body>
</html>






<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Release Information</title><style>body {font-family: Arial, sans-serif; font-size: 11px;} h3 {color: MediumSeaGreen;} p, h5 {color: black; margin-left: 20px;} a {color: mediumblue; text-decoration: none;}</style></head><body><h1>Hi,</h1><p>Please see below for the details of releases happening on the EU platform today.</p><h3>Releases Implemented Before 17:30</h3><h4>Nighthawk and BlackBird Releases</h4>{% for result_item in result %}{% if ("Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description) and result_item.closed_at and result_item.closed_at < '2024-09-16 17:30:00' %}<h5>{{ result_item.short_description }}</h5><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>{% endif %}{% endfor %}<h4>Vulcan Releases</h4>{% for result_item in result %}{% if "Vulcan" in result_item.short_description and result_item.closed_at and result_item.closed_at < '2024-09-16 17:30:00' %}<h5>{{ result_item.short_description }}</h5><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>{% endif %}{% endfor %}<h4>Other Releases</h4>{% for result_item in result %}{% if ("Nighthawk" not in result_item.short_description and "BlackBird" not in result_item.short_description and "Vulcan" not in result_item.short_description) and result_item.closed_at and result_item.closed_at < '2024-09-16 17:30:00' %}<h5>{{ result_item.short_description }}</h5><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>{% endif %}{% endfor %}<h3>Releases Implemented After 17:30</h3><h4>Nighthawk and BlackBird Releases</h4>{% for result_item in result %}{% if ("Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description) and result_item.closed_at and result_item.closed_at >= '2024-09-16 17:30:00' %}<h5>{{ result_item.short_description }}</h5><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>{% endif %}{% endfor %}<h4>Vulcan Releases</h4>{% for result_item in result %}{% if "Vulcan" in result_item.short_description and result_item.closed_at and result_item.closed_at >= '2024-09-16 17:30:00' %}<h5>{{ result_item.short_description }}</h5><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>{% endif %}{% endfor %}<h4>Other Releases</h4>{% for result_item in result %}{% if ("Nighthawk" not in result_item.short_description and "BlackBird" not in result_item.short_description and "Vulcan" not in result_item.short_description) and result_item.closed_at and result_item.closed_at >= '2024-09-16 17:30:00' %}<h5>{{ result_item.short_description }}</h5><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>{% endif %}{% endfor %}</body></html>



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 11px;
        }
        h3 {
            color: MediumSeaGreen;
        }
        p, h5 {
            color: black;
            margin-left: 20px;
        }
        a {
            color: mediumblue;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <h1>Hi,</h1>
    <p>Please see below for the details of releases happening on the EU platform today.</p>

    <!-- Releases Implemented Before 17:30 -->
    <h3>Releases Implemented Before 17:30</h3>

    <!-- Section for Nighthawk and BlackBird Releases -->
    <h4>Nighthawk and BlackBird Releases</h4>
    {% for result_item in result %}
        {% if ("Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description) and result_item.closed_at and result_item.closed_at < '2024-09-16 17:30:00' %}
            <h5>{{ result_item.short_description }}</h5>
            <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
        {% endif %}
    {% endfor %}

    <!-- Section for Vulcan Releases -->
    <h4>Vulcan Releases</h4>
    {% for result_item in result %}
        {% if "Vulcan" in result_item.short_description and result_item.closed_at and result_item.closed_at < '2024-09-16 17:30:00' %}
            <h5>{{ result_item.short_description }}</h5>
            <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
        {% endif %}
    {% endfor %}

    <!-- Section for Other Releases -->
    <h4>Other Releases</h4>
    {% for result_item in result %}
        {% if ("Nighthawk" not in result_item.short_description and "BlackBird" not in result_item.short_description and "Vulcan" not in result_item.short_description) and result_item.closed_at and result_item.closed_at < '2024-09-16 17:30:00' %}
            <h5>{{ result_item.short_description }}</h5>
            <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
        {% endif %}
    {% endfor %}

    <!-- Releases Implemented After 17:30 -->
    <h3>Releases Implemented After 17:30</h3>

    <!-- Section for Nighthawk and BlackBird Releases -->
    <h4>Nighthawk and BlackBird Releases</h4>
    {% for result_item in result %}
        {% if ("Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description) and result_item.closed_at and result_item.closed_at >= '2024-09-16 17:30:00' %}
            <h5>{{ result_item.short_description }}</h5>
            <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
        {% endif %}
    {% endfor %}

    <!-- Section for Vulcan Releases -->
    <h4>Vulcan Releases</h4>
    {% for result_item in result %}
        {% if "Vulcan" in result_item.short_description and result_item.closed_at and result_item.closed_at >= '2024-09-16 17:30:00' %}
            <h5>{{ result_item.short_description }}</h5>
            <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
        {% endif %}
    {% endfor %}

    <!-- Section for Other Releases -->
    <h4>Other Releases</h4>
    {% for result_item in result %}
        {% if ("Nighthawk" not in result_item.short_description and "BlackBird" not in result_item.short_description and "Vulcan" not in result_item.short_description) and result_item.closed_at and result_item.closed_at >= '2024-09-16 17:30:00' %}
            <h5>{{ result_item.short_description }}</h5>
            <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
        {% endif %}
    {% endfor %}
</body>
</html>



Objet : Compte rendu du meeting sur l’architecture d’APSscriptrunner

Bonjour [Nom du destinataire],

Je souhaite vous faire un retour sur le meeting avec Thomas concernant l'architecture d'APSscriptrunner. La réunion a été très enrichissante et m'a permis de mieux comprendre l'outil.

Nous avons discuté de mon besoin de recréer une template d'email plus claire pour les release notes. J’ai proposé une architecture combinant SQL, un script Python et du HTML pour générer ces emails. Thomas a confirmé que cette solution est faisable.

Il m’a également montré plusieurs fonctionnalités intéressantes, dont la fonction Def_release_note_request, qui contient une API Jira utile pour notre projet.

Je vous tiendrai informé de l'avancement.

Bien cordialement,
[Votre nom]



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body { font-family: Arial, sans-serif; font-size: 16px; }
        h1, h3 { color: MediumSeaGreen; }
        p, h5 { color: black; margin-left: 20px; }
        table { border: 1px solid black; border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid black; padding: 10px; text-align: left; }
        th { background-color: #f4f4f4; }
    </style>
</head>
<body>
    <h1>Release Notes for Today</h1>

    {% if releases %}
        <h3>Releases</h3>
        <table>
            <thead>
                <tr>
                    <th>Number</th>
                    <th>Status</th>
                    <th>Closed At</th>
                    <th>Short Description</th>
                    <th>Impact</th>
                    <th>Implementation</th>
                    <th>Rollback</th>
                </tr>
            </thead>
            <tbody>
                {% for release in releases %}
                <tr>
                    <td><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ release.sys_id }}">{{ release.number }}</a></td>
                    <td>{{ release.state_display }}</td>
                    <td>{{ release.closed_at }}</td>
                    <td>{{ release.short_description }}</td>
                    <td>{{ release.risk_impact_analysis }}</td>
                    <td>{{ release.implementation_plan }}</td>
                    <td>{{ release.backout_plan }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No releases to display.</p>
    {% endif %}

</body>
</html>



SELECT *
FROM servicenow.change_request
WHERE 
    (
        UPPER(assignment_group_display) LIKE UPPER('%BNPP_CIB_UK.GM ES ICET TS SDM%') 
        OR UPPER(assignment_group_display) LIKE UPPER('%BNPP_CIB_UK.GM ES ICET AP SDM%')
    )
    AND 
    (
        UPPER(cmdb_ci_display) LIKE UPPER('%NIGHTHAWK%') 
        OR UPPER(cmdb_ci_display) LIKE UPPER('%BLACKBIRD%') 
        OR UPPER(cmdb_ci_display) LIKE UPPER('%FORWARD PRICER%') 
        OR UPPER(cmdb_ci_display) LIKE UPPER('%VULCAN%')
    )
    AND 
    (
        UPPER(cmdb_ci_display) NOT LIKE UPPER('%LYNX%') 
        AND UPPER(cmdb_ci_display) NOT LIKE UPPER('%CREDIT%')
        AND UPPER(cmdb_ci_display) NOT LIKE UPPER('%JAG%') 
        AND UPPER(cmdb_ci_display) NOT LIKE UPPER('%QUARTZC%') 
        AND UPPER(cmdb_ci_display) NOT LIKE UPPER('%CRDION%') 
        AND UPPER(cmdb_ci_display) NOT LIKE UPPER('%OMEGA%')
    )
    AND 
    (
        (start_date IS NOT NULL AND start_date >= '2024-09-16 08:00:00')
        OR (work_start IS NOT NULL AND work_start >= '2024-09-16 08:00:00')
        OR (work_end IS NOT NULL AND work_end >= '2024-09-16 08:00:00')
    )
    AND 
    (
        (start_date IS NOT NULL AND start_date <= '2024-09-16 11:00:00')
        OR (end_date IS NOT NULL AND end_date <= '2024-09-16 11:00:00')
        OR (closed_at IS NOT NULL AND closed_at <= '2024-09-16 11:00:00')
    )
LIMIT 50;






<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Release Information</title><style>body {font-family: Arial, sans-serif; font-size: 11px;} h3 {color: MediumSeaGreen;} p, h5 {color: black; margin-left: 20px;} a {color: mediumblue; text-decoration: none;} </style></head><body><h1>Hi,</h1><p>Please see below for the details of releases happening on the EU platform today.</p><h3 style="color:MediumSeaGreen;">We implemented them early today:</h3>{% for result_item in result %}{% if "08:" in result_item.start_date or "09:" in result_item.start_date or "10:" in result_item.start_date or "11:" in result_item.start_date or "12:" in result_item.start_date or "13:" in result_item.start_date or "14:" in result_item.start_date %}{% if result_item.state_display != "Canceled" %}{% if "Nighthawk" in result_item.short_description %}<h3>Nighthawk Releases</h3><h5>{{ result_item.short_description }}</h5><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>{% elif "Vulcan" in result_item.short_description %}<h3>Vulcan Releases</h3><h5>{{ result_item.short_description }}</h5><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>{% else %}<h3>Other Releases</h3><h5>{{ result_item.short_description }}</h5><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>{% endif %}{% endif %}{% endif %}{% endfor %}<h3 style="color:MediumSeaGreen;">We will implement on or after 17:30 LON time:</h3>{% for result_item in result %}{% if "15:" in result_item.start_date or "16:" in result_item.start_date or "17:" in result_item.start_date or "18:" in result_item.start_date %}{% if result_item.state_display != "Canceled" %}{% if "Nighthawk" in result_item.short_description %}<h3>Nighthawk Releases</h3><h5>{{ result_item.short_description }}</h5><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>{% elif "Vulcan" in result_item.short_description %}<h3>Vulcan Releases</h3><h5>{{ result_item.short_description }}</h5><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>{% else %}<h3>Other Releases</h3><h5>{{ result_item.short_description }}</h5><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>{% endif %}{% endif %}{% endif %}{% endfor %}</body></html>

<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Release Information</title><style>body {font-family: Arial, sans-serif; font-size: 11px;} h3 {color: MediumSeaGreen;} p, h5 {color: black; margin-left: 20px;} a {color: mediumblue; text-decoration: none;} </style></head><body><h1>Hi,</h1><p>Please see below for the details of releases happening on the EU platform today.</p><h3 style="color:MediumSeaGreen;">We implemented them early today:</h3>{% set nighthawk_releases = [] %}{% set vulcan_releases = [] %}{% set other_releases = [] %}{% for result_item in result %}{% if "08:" in result_item.start_date or "09:" in result_item.start_date or "10:" in result_item.start_date or "11:" in result_item.start_date or "12:" in result_item.start_date or "13:" in result_item.start_date or "14:" in result_item.start_date %}{% if result_item.state_display != "Canceled" %}{% if "Nighthawk" in result_item.short_description %}{% set nighthawk_releases = nighthawk_releases.append(result_item) %}{% elif "Vulcan" in result_item.short_description %}{% set vulcan_releases = vulcan_releases.append(result_item) %}{% else %}{% set other_releases = other_releases.append(result_item) %}{% endif %}{% endif %}{% endif %}{% endfor %}{% if nighthawk_releases %}<h3>Nighthawk Releases</h3>{% for release in nighthawk_releases %}<h5>{{ release.short_description }}</h5><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ release.sys_id }}">Ticket #{{ release.number }}</a></p>{% endfor %}{% endif %}{% if vulcan_releases %}<h3>Vulcan Releases</h3>{% for release in vulcan_releases %}<h5>{{ release.short_description }}</h5><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ release.sys_id }}">Ticket #{{ release.number }}</a></p>{% endfor %}{% endif %}{% if other_releases %}<h3>Other Releases</h3>{% for release in other_releases %}<h5>{{ release.short_description }}</h5><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ release.sys_id }}">Ticket #{{ release.number }}</a></p>{% endfor %}{% endif %}<h3 style="color:MediumSeaGreen;">We will implement on or after 17:30 LON time:</h3>{% set nighthawk_releases = [] %}{% set vulcan_releases = [] %}{% set other_releases = [] %}{% for result_item in result %}{% if "15:" in result_item.start_date or "16:" in result_item.start_date or "17:" in result_item.start_date or "18:" in result_item.start_date %}{% if result_item.state_display != "Canceled" %}{% if "Nighthawk" in result_item.short_description %}{% set nighthawk_releases = nighthawk_releases.append(result_item) %}{% elif "Vulcan" in result_item.short_description %}{% set vulcan_releases = vulcan_releases.append(result_item) %}{% else %}{% set other_releases = other_releases.append(result_item) %}{% endif %}{% endif %}{% endif %}{% endfor %}{% if nighthawk_releases %}<h3>Nighthawk Releases</h3>{% for release in nighthawk_releases %}<h5>{{ release.short_description }}</h5><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ release.sys_id }}">Ticket #{{ release.number }}</a></p>{% endfor %}{% endif %}{% if vulcan_releases %}<h3>Vulcan Releases</h3>{% for release in vulcan_releases %}<h5>{{ release.short_description }}</h5><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ release.sys_id }}">Ticket #{{ release.number }}</a></p>{% endfor %}{% endif %}{% if other_releases %}<h3>Other Releases</h3>{% for release in other_releases %}<h5>{{ release.short_description }}</h5><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ release.sys_id }}">Ticket #{{ release.number }}</a></p>{% endfor %}{% endif %}</body></html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {font-family: Arial, sans-serif; font-size: 11px;}
        h3 {color: MediumSeaGreen;}
        p, h5 {color: black; margin-left: 20px;}
        a {color: mediumblue; text-decoration: none;}
    </style>
</head>
<body>
    <h1>Hi,</h1>
    <p>Please see below for the details of releases happening on the EU platform today.</p>
    
    <!-- Affichage des releases Nighthawk, Vulcan et autres triées côté backend -->
    <h3 style="color:MediumSeaGreen;">We implemented them early today:</h3>
    {% for release in nighthawk_releases %}
        <h3>Nighthawk Releases</h3>
        <h5>{{ release.short_description }}</h5>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ release.sys_id }}">Ticket #{{ release.number }}</a></p>
    {% endfor %}
    
    {% for release in vulcan_releases %}
        <h3>Vulcan Releases</h3>
        <h5>{{ release.short_description }}</h5>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ release.sys_id }}">Ticket #{{ release.number }}</a></p>
    {% endfor %}
    
    {% for release in other_releases %}
        <h3>Other Releases</h3>
        <h5>{{ release.short_description }}</h5>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ release.sys_id }}">Ticket #{{ release.number }}</a></p>
    {% endfor %}
    
    <h3 style="color:MediumSeaGreen;">We will implement on or after 17:30 LON time:</h3>
    {% for release in future_nighthawk_releases %}
        <h3>Nighthawk Releases</h3>
        <h5>{{ release.short_description }}</h5>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ release.sys_id }}">Ticket #{{ release.number }}</a></p>
    {% endfor %}
    
    {% for release in future_vulcan_releases %}
        <h3>Vulcan Releases</h3>
        <h5>{{ release.short_description }}</h5>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ release.sys_id }}">Ticket #{{ release.number }}</a></p>
    {% endfor %}
    
    {% for release in future_other_releases %}
        <h3>Other Releases</h3>
        <h5>{{ release.short_description }}</h5>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ release.sys_id }}">Ticket #{{ release.number }}</a></p>
    {% endfor %}
</body>
</html>






[PARSER]
    Name   custom_log_parser
    Format  regex
    Regex   ^(?<timestamp>[^\s]+ [^\s]+) (?<level>[^\s]+) \[(?<component>[^\]]+)\] \((?<thread>[^\)]+)\) \[-J \[(?<details>[^\]]+)\] \| (?<message>.*) \| ref-(?<ref>[^\s,]+), duration-(?<duration>[0-9]+) ms, .*$
    Time_Key timestamp
    Time_Format %Y-%m-%d %H:%M:%S,%L%z

Merci pour la précision. Dans ce cas, la stratégie de parsing pour vos logs multi-lignes doit se baser sur le fait que chaque nouvelle entrée de log commence par une date. Les lignes suivantes (qui ne commencent pas par une date) font partie du message multi-ligne de l'entrée de log précédente.

Voici comment vous pouvez configurer un parser multi-ligne adapté à ce cas avec Fluent Bit :

### 1. Configurer le parser multi-ligne

Nous allons définir un parser qui reconnaît une nouvelle ligne de log lorsqu'elle commence par une date, et qui traite toutes les lignes suivantes comme des continuations de cette log.

```ini
[PARSE]
    Name          multi_line_calypso
    Format        regex
    Regex_Firstline  ^(?<time>\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2},\d{3}\+\d{4})\s+(?<level>\w+)\s+\|(?<module>[^|]+)\]\s+\((?<task>[^)]+)\)\s+\|(?<ip>[^|]+)\|(?<message>.*)$
    Regex_Nextline   ^(?!\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2},\d{3}\+\d{4}).*$
    Time_Key      time
    Time_Format   %Y-%m-%d %H:%M:%S,%L%z
    Time_Keep     On
```

### 2. Explication des parties de la configuration :

- **Name** : Le nom du parser que vous utiliserez pour l'input.
- **Format** : Le format de parsing (ici, `regex`).
- **Regex_Firstline** : Cette regex détecte la première ligne d'un log, qui commence toujours par une date. Cette regex est la même que précédemment, elle capture les différents éléments comme le temps, le niveau de log, etc.
- **Regex_Nextline** : Cette regex détecte les lignes qui ne commencent **pas** par une date (c'est-à-dire les lignes qui appartiennent à l'entrée de log précédente).
  
  ```regex
  ^(?!\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2},\d{3}\+\d{4}).*$
  ```
  
  - `^(?!...)` : Ceci est un "negative lookahead". Il s'assure que la ligne ne commence **pas** par le motif à l'intérieur.
  - `\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2},\d{3}\+\d{4}` : Ceci est le motif qui correspond à une date, comme `2024-08-28 14:17:28,915+0200`.
  - `.*$` : Capture le reste de la ligne si elle ne commence pas par une date.

### 3. Configurer l'input

Maintenant, vous devez configurer l'input pour utiliser ce parser :

```ini
[INPUT]
    Name              tail
    Path              /var/log/myapp.log
    Parser            multi_line_calypso
    Tag               myapp.log
    DB                /var/log/fluentbit/myapp.db
    Mem_Buf_Limit     5MB
    Skip_Long_Lines   On
    Refresh_Interval  5
    Multiline         On
    Multiline.Flush   5
    Parser_Firstline  multi_line_calypso
    Parser_Nextline   multi_line_calypso
```

### 4. Explication des options d'input :

- **Multiline** : Active le support des logs multi-lignes.
- **Multiline.Flush** : Définit le délai en secondes pour forcer la fin d'une séquence multi-ligne et effectuer un flush.
- **Parser_Firstline** : Le nom du parser pour la première ligne d'un log multi-ligne (qui commence par une date).
- **Parser_Nextline** : Le nom du parser pour les lignes suivantes (qui n'ont pas de date).

### 5. Conclusion

Avec cette configuration, Fluent Bit détectera chaque nouvelle entrée de log lorsqu'elle commence par une date, et agrégera toutes les lignes suivantes jusqu'à ce qu'il rencontre une nouvelle date. Cela permet de traiter correctement les logs multi-lignes comme ceux que vous avez fournis.

N'oubliez pas de tester cette configuration et de l'ajuster en fonction de la structure exacte de vos logs et des résultats que vous observez.

[PARSER]
    Name   calypso_logs
    Format regex
    Regex  (?<timestamp>[^ ]+ [^ ]+) (?<level>[^ ]+) \[(?<component>[^\]]+)\] \((?<thread>[^\)]+)\) \[-J \[(?<details>[^\]]+)\] \| task completed, id-(?<id>[0-9]+), ref-(?<ref>[^\s,]+), duration-(?<duration>[0-9]+) ms, sla-[0-9]+ ms
    Time_Key timestamp
    Time_Format %Y-%m-%d %H:%M:%S,%L
    Date_Key timestamp


PUT _ingest/pipeline/calypsoscheduler_pipeline
{
  "description": "Pipeline to parse Calypso logs",
  "processors": [
    {
      "grok": {
        "field": "message",
        "patterns": [
          "%{TIMESTAMP_ISO8601:timestamp} %{LOGLEVEL:level} \\[%{DATA:component}\\] \\(%{DATA:thread}\\) \\[-J \\[%{DATA:details}\\] \\| task completed, id-%{NUMBER:id}, ref-%{DATA:ref}, duration-%{NUMBER:duration} ms, sla-%{NUMBER:sla} ms\\]"
        ]
      }
    },
    {
      "date": {
        "field": "timestamp",
        "formats": ["yyyy-MM-dd HH:mm:ss,SSS"]
      }
    },
    {
      "convert": {
        "field": "duration",
        "type": "long"
      }
    },
    {
      "convert": {
        "field": "id",
        "type": "long"
      }
    }
  ]
}



POST /calypso-logs/_doc
{
  "message": "2024-07-31 16:15:08,166+0200 INFO [com.calypso.SYSTEM.DefaultJob] (QuartzScheduler_Worker-15) [-J [] | task completed, id-361666, ref-CHECK_REAL_TIME_PRICING_MC_ENTRIES, duration-8129 ms, sla-300000 ms]"
}


2024-07-31 16:15:08,166+0200 INFO [com.calypso.SYSTEM.DefaultJob] (QuartzScheduler_Worker-15) [-J [] | task completed, id-361666, ref-CHECK_REAL_TIME_PRICING_MC_ENTRIES, duration-8129 ms, sla-300000 ms]


PUT _ingest/pipeline/grok_pipeline
{
  "description": "Pipeline pour parser les logs Calypso",
  "processors": [
    {
      "grok": {
        "field": "message",
        "patterns": [
          "%{TIMESTAMP_ISO8601:timestamp} %{LOGLEVEL:level} \\[%{DATA:component}\\] \\(%{DATA:thread}\\) \\[-J \\[%{DATA:details}\\] \\| task completed, id-%{NUMBER:id}, ref-%{DATA:ref}, duration-%{NUMBER:duration} ms, sla-%{NUMBER:sla} ms\\]"
        ],
        "pattern_definitions": {
          "NUMBER": "[0-9]+"
        }
      }
    }
  ]
}




POST /calypsoscheduler_uat_calypso_161072/_doc?pipeline=grok_pipeline
{
  "message": "2024-07-31 16:15:08,166+0200 INFO [com.calypso.SYSTEM.DefaultJob] (QuartzScheduler_Worker-15) [-J [] | task completed, id-361666, ref-CHECK_REAL_TIME_PRICING_MC_ENTRIES, duration-8129 ms, sla-300000 ms]"
}



POST /_ingest/pipeline/your_pipeline_id/_simulate
{
  "docs": [
    {
      "_source": {
        "log": "2024-07-31 16:15:08,166+0200 INFO [com.calypso.SYSTEM.DefaultJob] (QuartzScheduler_Worker-15) [-J [] | task completed, id-361666, ref-CHECK_REAL_TIME_PRICING_MC_ENTRIES, duration-8129 ms, sla-300000 ms]"
      }
    }
  ]
}




POST /calypsoscheduler_uat_161072.log/_doc?pipeline=my_pipeline
{
  "log": "2024-07-31 16:15:08,166+0200 INFO [com.calypso.SYSTEM.DefaultJob] (QuartzScheduler_Worker-15) [-J [] | task completed, id-361666, ref-CHECK_REAL_TIME_PRICING_MC_ENTRIES, duration-8129 ms, sla-300000 ms]"
}


POST /_bulk?pipeline=my_pipeline
{ "index": { "_index": "calypsoscheduler_uat_161072.log" } }
{ "log": "2024-07-31 16:15:08,166+0200 INFO [com.calypso.SYSTEM.DefaultJob] (QuartzScheduler_Worker-15) [-J [] | task completed, id-361666, ref-CHECK_REAL_TIME_PRICING_MC_ENTRIES, duration-8129 ms, sla-300000 ms]" }
{ "index": { "_index": "calypsoscheduler_uat_161072.log" } }
{ "log": "2024-07-31 16:16:08,166+0200 INFO [com.calypso.SYSTEM.DefaultJob] (QuartzScheduler_Worker-16) [-J [] | task completed, id-361667, ref-OTHER_REF, duration-9000 ms, sla-300000 ms]" }


GET /calypsoscheduler_uat_161072.log/_search
{
  "_source": ["timestamp", "level", "component", "thread", "details", "message", "ref", "duration", "sla"],
  "query": {
    "match_all": {}
  }
}






POST /bigdata_bp2s_calypso/_search
{
  "query": {
    "bool": {
      "must": [
        { "match": { "log": "task completed" }},
        { "terms": { "id": [101165, 159665, 157677] }}
      ]
    }
  },
  "script_fields": {
    "duration_sec": {
      "script": {
        "lang": "painless",
        "source": """
        String log = doc['log'].value;
        int start = log.indexOf("duration=") + "duration=".length();
        int end = log.indexOf(" ms", start);
        String durationStr = log.substring(start, end);
        return Integer.parseInt(durationStr) / 1000;
        """
      }
    }
  },
  "aggs": {
    "by_ref": {
      "terms": {
        "field": "ref.keyword",
        "size": 10
      },
      "aggs": {
        "avg_duration_sec": {
          "avg": {
            "field": "duration_sec"
          }
        }
      }
    }
  },
  "size": 0
}


[PARSE]
    Name          multi_line_calypso
    Format        regex
    Regex_Firstline  ^(?<time>\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2},\d{3}\+\d{4})\s+(?<level>\w+)\s+\|(?<module>[^|]+)\]\s+\((?<task>[^)]+)\)\s+\|(?<ip>[^|]+)\|(?<message>.*)$
    Regex_Nextline   ^(?!\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2},\d{3}\+\d{4}).*$
    Time_Key      time
    Time_Format   %Y-%m-%d %H:%M:%S,%L%z
    Time_Keep     On




PUT /_ingest/pipeline/my_pipeline
{
  "description": "Pipeline de traitement des logs",
  "processors": [
    {
      "grok": {
        "field": "log",
        "patterns": [
          "%{TIMESTAMP_ISO8601:timestamp} %{LOGLEVEL:level} \\[%{DATA:component}\\] \\(%{DATA:thread}\\) \\[-J \\[%{GREEDYDATA:details}\\] \\| %{GREEDYDATA:message} \\| ref-%{DATA:ref}, duration-%{NUMBER:duration} ms, sla-%{NUMBER:sla} ms"
        ],
        "on_failure": [
          {
            "set": {
              "field": "grok_failure",
              "value": "{{ _ingest.on_failure_message }}"
            }
          }
        ]
      }
    }
  ]
}

GET /calypsoscheduler_uat_161072.log/_search
{
  "_source": ["timestamp", "level", "component", "thread", "details", "message", "ref", "duration", "sla"],
  "query": {
    "match_all": {}
  }
}








<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 11px;
        }
        h3 {
            color: MediumSeaGreen;
        }
        p, h5 {
            color: black;
            margin-left: 20px;
        }
        a {
            color: mediumblue;
            text-decoration: none;
        }
    </style>
</head>
<body>

    <h1>Hi,</h1>
    <p>Please see below for the details of releases happening on the EU platform today.</p>
    
    <h3 style="color:MediumSeaGreen;">We implemented them early today:</h3>

    <!-- Boucle pour trier et afficher les résultats -->
    {% for result_item in result %}
        {% if "08:" in result_item.start_date or 
              "09:" in result_item.start_date or 
              "10:" in result_item.start_date or 
              "11:" in result_item.start_date or 
              "12:" in result_item.start_date or 
              "13:" in result_item.start_date or 
              "14:" in result_item.start_date %}
            
            {% if result_item.state_display != "Canceled" %}
                
                <!-- Section Nighthawk / BlackBird -->
                {% if "Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description %}
                    <h3>Nighthawk / BlackBird</h3>
                    <h5>{{ result_item.short_description }}</h5>
                    <p><strong>Justification:</strong> {{ result_item.justification }}</p>
                    <p><strong>Plan d'implémentation:</strong> {{ result_item.implementation_plan }}</p>
                    <p>
                        <a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">
                            Ticket #{{ result_item.number }}
                        </a>
                    </p>
                
                <!-- Section Vulcan -->
                {% elif "Vulcan" in result_item.short_description %}
                    <h3>Vulcan</h3>
                    <h5>{{ result_item.short_description }}</h5>
                    <p><strong>Justification:</strong> {{ result_item.justification }}</p>
                    <p><strong>Plan d'implémentation:</strong> {{ result_item.implementation_plan }}</p>
                    <p>
                        <a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">
                            Ticket #{{ result_item.number }}
                        </a>
                    </p>
                
                <!-- Section Autres releases -->
                {% else %}
                    <h3>Other Releases</h3>
                    <h5>{{ result_item.short_description }}</h5>
                    <p><strong>Justification:</strong> {{ result_item.justification }}</p>
                    <p><strong>Plan d'implémentation:</strong> {{ result_item.implementation_plan }}</p>
                    <p>
                        <a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">
                            Ticket #{{ result_item.number }}
                        </a>
                    </p>
                {% endif %}
            
            {% endif %}
        
        {% endif %}
    {% endfor %}

</body>
</html>


<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Release Information</title><style>body {font-family: Arial, sans-serif; font-size: 11px;} h3 {color: MediumSeaGreen;} p, h5 {color: black; margin-left: 20px;} a {color: mediumblue; text-decoration: none;} </style></head><body><h1>Hi,</h1><p>Please see below for the details of releases happening on the EU platform today.</p><h3 style="color:MediumSeaGreen;">We implemented them early today:</h3>{% for result_item in result %}{% if "08:" in result_item.start_date or "09:" in result_item.start_date or "10:" in result_item.start_date or "11:" in result_item.start_date or "12:" in result_item.start_date or "13:" in result_item.start_date or "14:" in result_item.start_date %}{% if result_item.state_display != "Canceled" %}{% if "Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description %}<h3>Nighthawk / BlackBird</h3><h5>{{ result_item.short_description }}</h5><p><strong>Justification:</strong> {{ result_item.justification }}</p><p><strong>Plan d'implémentation:</strong> {{ result_item.implementation_plan }}</p><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>{% elif "Vulcan" in result_item.short_description %}<h3>Vulcan</h3><h5>{{ result_item.short_description }}</h5><p><strong>Justification:</strong> {{ result_item.justification }}</p><p><strong>Plan d'implémentation:</strong> {{ result_item.implementation_plan }}</p><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>{% else %}<h3>Other Releases</h3><h5>{{ result_item.short_description }}</h5><p><strong>Justification:</strong> {{ result_item.justification }}</p><p><strong>Plan d'implémentation:</strong> {{ result_item.implementation_plan }}</p><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>{% endif %}{% endif %}{% endif %}{% endfor %}</body></html>


<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Release Information</title><style>body {font-family: Arial, sans-serif; font-size: 11px;} h3 {color: MediumSeaGreen;} p, h5 {color: black; margin-left: 20px;} a {color: mediumblue; text-decoration: none;} </style></head><body><h1>Hi,</h1><p>Please see below for the details of releases happening on the EU platform today.</p><h3>Nighthawk Releases</h3>{% for result_item in result %}{% if "Nighthawk" in result_item.short_description %}<h5>{{ result_item.short_description }}</h5><p><strong>Justification:</strong> {{ result_item.justification }}</p><p><strong>Plan d'implémentation:</strong> {{ result_item.implementation_plan }}</p><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>{% endif %}{% endfor %}<h3>Vulcan Releases</h3>{% for result_item in result %}{% if "Vulcan" in result_item.short_description %}<h5>{{ result_item.short_description }}</h5><p><strong>Justification:</strong> {{ result_item.justification }}</p><p><strong>Plan d'implémentation:</strong> {{ result_item.implementation_plan }}</p><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>{% endif %}{% endfor %}<h3>Other Releases</h3>{% for result_item in result %}{% if "Nighthawk" not in result_item.short_description and "Vulcan" not in result_item.short_description %}<h5>{{ result_item.short_description }}</h5><p><strong>Justification:</strong> {{ result_item.justification }}</p><p><strong>Plan d'implémentation:</strong> {{ result_item.implementation_plan }}</p><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>{% endif %}{% endfor %}</body></html>



<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Release Information</title><style>body {font-family: Arial, sans-serif; font-size: 11px;} h3 {color: MediumSeaGreen;} p, h5 {color: black; margin-left: 20px;} a {color: mediumblue; text-decoration: none;} </style></head><body><h1>Hi,</h1><p>Please see below for the details of releases happening on the EU platform today.</p><h3 style="color:MediumSeaGreen;">We implemented them early today:</h3>{% for result_item in result %}{% if "08:" in result_item.start_date or "09:" in result_item.start_date or "10:" in result_item.start_date or "11:" in result_item.start_date or "12:" in result_item.start_date or "13:" in result_item.start_date or "14:" in result_item.start_date %}{% if result_item.state_display != "Canceled" %}{% if "Nighthawk" in result_item.short_description %}<h3>Nighthawk Releases</h3><h5>{{ result_item.short_description }}</h5><p><strong>Justification:</strong> {{ result_item.justification }}</p><p><strong>Plan d'implémentation:</strong> {{ result_item.implementation_plan }}</p><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>{% elif "Vulcan" in result_item.short_description %}<h3>Vulcan Releases</h3><h5>{{ result_item.short_description }}</h5><p><strong>Justification:</strong> {{ result_item.justification }}</p><p><strong>Plan d'implémentation:</strong> {{ result_item.implementation_plan }}</p><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>{% else %}<h3>Other Releases</h3><h5>{{ result_item.short_description }}</h5><p><strong>Justification:</strong> {{ result_item.justification }}</p><p><strong>Plan d'implémentation:</strong> {{ result_item.implementation_plan }}</p><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>{% endif %}{% endif %}{% endif %}{% endfor %}<h3 style="color:MediumSeaGreen;">We will implement on or after 17:30 LON time:</h3>{% for result_item in result %}{% if "15:" in result_item.start_date or "16:" in result_item.start_date or "17:" in result_item.start_date or "18:" in result_item.start_date %}{% if result_item.state_display != "Canceled" %}{% if "Nighthawk" in result_item.short_description %}<h3>Nighthawk Releases</h3><h5>{{ result_item.short_description }}</h5><p><strong>Justification:</strong> {{ result_item.justification }}</p><p><strong>Plan d'implémentation:</strong> {{ result_item.implementation_plan }}</p><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>{% elif "Vulcan" in result_item.short_description %}<h3>Vulcan Releases</h3><h5>{{ result_item.short_description }}</h5><p><strong>Justification:</strong> {{ result_item.justification }}</p><p><strong>Plan d'implémentation:</strong> {{ result_item.implementation_plan }}</p><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>{% else %}<h3>Other Releases</h3><h5>{{ result_item.short_description }}</h5><p><strong>Justification:</strong> {{ result_item.justification }}</p><p><strong>Plan d'implémentation:</strong> {{ result_item.implementation_plan }}</p><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>{% endif %}{% endif %}{% endif %}{% endfor %}</body></html>



<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Release Information</title><style>body {font-family: Calibri, sans-serif; font-size: 12px; margin: 20px;} h1, h3 {color: MediumSeaGreen;} p {color: black; margin-left: 20px;} h5 {color: black; font-size: 14px; font-weight: bold; margin-left: 40px;} a {color: mediumblue; text-decoration: none;} .section-title {font-size: 16px; margin-top: 20px; margin-bottom: 10px; border-bottom: 2px solid MediumSeaGreen; padding-bottom: 5px;} .release-item {margin-left: 20px; margin-bottom: 15px;} </style></head><body><h1>Hi,</h1><p>Please see below for the details of releases happening on the EU platform today.</p><h3 class="section-title">Nighthawk / BlackBird Releases</h3>{% for result_item in result %}{% if result_item.state_display != "Canceled" and ("Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description) %}<div class="release-item"><h5>{{ result_item.short_description }}</h5><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p></div>{% endif %}{% endfor %}<h3 class="section-title">Vulcan Releases</h3>{% for result_item in result %}{% if result_item.state_display != "Canceled" and "Vulcan" in result_item.short_description %}<div class="release-item"><h5>{{ result_item.short_description }}</h5><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p></div>{% endif %}{% endfor %}<h3 class="section-title">Other Releases</h3>{% for result_item in result %}{% if result_item.state_display != "Canceled" and not ("Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description or "Vulcan" in result_item.short_description) %}<div class="release-item"><h5>{{ result_item.short_description }}</h5><p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p></div>{% endif %}{% endfor %}</body></html>


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 20px;
            margin: 0;
            padding: 0;
            background-color: #f9f9f9;
        }
        h1, h3, h5 {
            color: #333;
            text-align: center;
            margin: 10px;
        }
        h3 {
            color: MediumSeaGreen;
            border-bottom: 2px solid MediumSeaGreen;
            padding-bottom: 5px;
            font-size: 24px;
        }
        p {
            color: #333;
            margin: 10px 20px;
            font-size: 20px;
        }
        a {
            color: mediumblue;
            text-decoration: none;
            font-size: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #ffffff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .release-section {
            margin-bottom: 30px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Release Information</h1>
        <p>Please see below for the details of releases happening on the EU platform today.</p>

        <h3>We have implemented them earlier today:</h3>

        <!-- BlackBird/Nighthawk Section -->
        {% if result_item.short_description contains "Nighthawk" or result_item.short_description contains "BlackBird" %}
        <div class="release-section">
            <h3>BlackBird/Nighthawk Releases</h3>
            {% for result_item in result %}
            {% if "Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description %}
                <p><strong>{{ result_item.short_description }}</strong></p>
                <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
            {% endif %}
            {% endfor %}
        </div>
        {% endif %}

        <!-- Vulcan Section -->
        {% if result_item.short_description contains "Vulcan" %}
        <div class="release-section">
            <h3>Vulcan Releases</h3>
            {% for result_item in result %}
            {% if "Vulcan" in result_item.short_description %}
                <p><strong>{{ result_item.short_description }}</strong></p>
                <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
            {% endif %}
            {% endfor %}
        </div>
        {% endif %}

        <!-- Other Releases Section -->
        <div class="release-section">
            <h3>Other Releases</h3>
            {% for result_item in result %}
            {% if "Nighthawk" not in result_item.short_description and "Vulcan" not in result_item.short_description and "BlackBird" not in result_item.short_description %}
                <p><strong>{{ result_item.short_description }}</strong></p>
                <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
            {% endif %}
            {% endfor %}
        </div>
    </div>
</body>
</html>



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 11px;
        }
        h3 {
            color: MediumSeaGreen;
        }
        p, h5 {
            color: black;
            margin-left: 20px;
        }
        a {
            color: mediumblue;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <h1>Hi,</h1>
    <p>Please see below for the details of releases happening on the EU platform today.</p>

    <!-- Section for Nighthawk Releases -->
    <h3>Nighthawk Releases</h3>
    {% for result_item in result %}
    {% if "Nighthawk" in result_item.short_description %}
        <h5>{{ result_item.short_description }}</h5>
        <p><strong>Justification:</strong> {{ result_item.justification }}</p>
        <p><strong>Plan d'implémentation:</strong> {{ result_item.implementation_plan }}</p>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
    {% endif %}
    {% endfor %}

    <!-- Section for Vulcan Releases -->
    <h3>Vulcan Releases</h3>
    {% for result_item in result %}
    {% if "Vulcan" in result_item.short_description %}
        <h5>{{ result_item.short_description }}</h5>
        <p><strong>Justification:</strong> {{ result_item.justification }}</p>
        <p><strong>Plan d'implémentation:</strong> {{ result_item.implementation_plan }}</p>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
    {% endif %}
    {% endfor %}

    <!-- Section for Other Releases -->
    <h3>Other Releases</h3>
    {% for result_item in result %}
    {% if "Nighthawk" not in result_item.short_description and "Vulcan" not in result_item.short_description %}
        <h5>{{ result_item.short_description }}</h5>
        <p><strong>Justification:</strong> {{ result_item.justification }}</p>
        <p><strong>Plan d'implémentation:</strong> {{ result_item.implementation_plan }}</p>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
    {% endif %}
    {% endfor %}
</body>
</html>


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 11px;
        }
        h3 {
            color: MediumSeaGreen;
        }
        p, h5 {
            color: black;
            margin-left: 20px;
        }
        a {
            color: mediumblue;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <h1>Hi,</h1>
    <p>Please see below for the details of releases happening on the EU platform today.</p>

    <!-- Section for Nighthawk Releases -->
    <h3>Nighthawk Releases</h3>
    {% for result_item in result %}
    {% if "Nighthawk" in result_item.short_description %}
        <h5>{{ result_item.short_description }}</h5>
        <p><strong>Justification:</strong> {{ result_item.justification }}</p>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
    {% endif %}
    {% endfor %}

    <!-- Section for Vulcan Releases -->
    <h3>Vulcan Releases</h3>
    {% for result_item in result %}
    {% if "Vulcan" in result_item.short_description %}
        <h5>{{ result_item.short_description }}</h5>
        <p><strong>Justification:</strong> {{ result_item.justification }}</p>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
    {% endif %}
    {% endfor %}

    <!-- Section for Other Releases -->
    <h3>Other Releases</h3>
    {% for result_item in result %}
    {% if "Nighthawk" not in result_item.short_description and "Vulcan" not in result_item.short_description %}
        <h5>{{ result_item.short_description }}</h5>
        <p><strong>Justification:</strong> {{ result_item.justification }}</p>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
    {% endif %}
    {% endfor %}
</body>
</html>



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 11px;
        }
        h3 {
            color: MediumSeaGreen;
        }
        p, h5 {
            color: black;
            margin-left: 20px;
        }
        a {
            color: mediumblue;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <h1>Hi,</h1>
    <p>Please see below for the details of releases happening on the EU platform today.</p>

    <!-- Section for Nighthawk Releases -->
    <h3>Nighthawk Releases</h3>
    {% for result_item in result %}
    {% if "Nighthawk" in result_item.short_description %}
        <h5>{{ result_item.short_description }}</h5>
        <p><strong>Justification:</strong> {{ result_item.justification }}</p>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
        <br><br>
    {% endif %}
    {% endfor %}

    <!-- Section for Vulcan Releases -->
    <h3>Vulcan Releases</h3>
    {% for result_item in result %}
    {% if "Vulcan" in result_item.short_description %}
        <h5>{{ result_item.short_description }}</h5>
        <p><strong>Justification:</strong> {{ result_item.justification }}</p>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
        <br><br>
    {% endif %}
    {% endfor %}

    <!-- Section for Other Releases -->
    <h3>Other Releases</h3>
    {% for result_item in result %}
    {% if "Nighthawk" not in result_item.short_description and "Vulcan" not in result_item.short_description %}
        <h5>{{ result_item.short_description }}</h5>
        <p><strong>Justification:</strong> {{ result_item.justification }}</p>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
        <br><br>
    {% endif %}
    {% endfor %}
</body>
</html>

`


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 11px;
        }
        h3 {
            color: MediumSeaGreen;
        }
        p, h5 {
            color: black;
            margin-left: 20px;
        }
        a {
            color: mediumblue;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <h1>Hi,</h1>
    <p>Please see below for the details of releases happening on the EU platform today.</p>

    <!-- Section for Nighthawk and BlackBird Releases -->
    <h3>Nighthawk and BlackBird Releases</h3>
    {% for result_item in result %}
    {% if "Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description %}
        <h5>{{ result_item.short_description }}</h5>
        <p><strong>Justification:</strong> {{ result_item.justification }}</p>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
        <br><br>
    {% endif %}
    {% endfor %}

    <!-- Section for Vulcan Releases -->
    <h3>Vulcan Releases</h3>
    {% for result_item in result %}
    {% if "Vulcan" in result_item.short_description %}
        <h5>{{ result_item.short_description }}</h5>
        <p><strong>Justification:</strong> {{ result_item.justification }}</p>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
        <br><br>
    {% endif %}
    {% endfor %}

    <!-- Section for Other Releases -->
    <h3>Other Releases</h3>
    {% for result_item in result %}
    {% if "Nighthawk" not in result_item.short_description and "Vulcan" not in result_item.short_description and "BlackBird" not in result_item.short_description %}
        <h5>{{ result_item.short_description }}</h5>
        <p><strong>Justification:</strong> {{ result_item.justification }}</p>
        <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
        <br><br>
    {% endif %}
    {% endfor %}
</body>
</html>


