<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 11px;
        }
        h1 {
            font-size: 18px; /* Adjusted size for "Hi" */
        }
        h3 {
            color: MediumSeaGreen;
        }
        h5 {
            color: black;
            margin-left: 20px;
            margin-bottom: 5px; /* Reduced space below short description */
        }
        p {
            color: black;
            margin-left: 20px;
            margin-top: 0; /* Reduced space above justification and ticket */
            margin-bottom: 2px; /* Reduced space below justification and ticket */
        }
        a {
            color: mediumblue;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <h1>Hi,</h1>
    <p style="font-size: 14px;">Please see below for the details of releases happening on the EU platform today.</p>

    <!-- Section for releases implemented early today -->
    <h3 style="color:MediumSeaGreen;">We implemented them early today:</h3>
    {% for result_item in result %}
        {% if ("08:" in result_item.start_date or "09:" in result_item.start_date or "10:" in result_item.start_date or "11:" in result_item.start_date or "12:" in result_item.start_date or "13:" in result_item.start_date or "14:" in result_item.start_date) %}
            {% if result_item.state_display != "Canceled" %}
                <!-- Exclure les releases contenant "Nighthawk", "BlackBird" ou "Vulcan" dans cette section -->
                {% if "Nighthawk" not in result_item.short_description and "BlackBird" not in result_item.short_description and "Vulcan" not in result_item.short_description %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <br><br>
                {% endif %}
            {% endif %}
        {% endif %}
    {% endfor %}

    <!-- Section for releases implemented on or after 17:30 -->
    <h3 style="color:MediumSeaGreen;">We will implement on or after 17:30 LDN time:</h3>
    {% for result_item in result %}
        <!-- Afficher toutes les releases "BlackBird", "Nighthawk", et "Vulcan" entre 08h et 18h -->
        {% if ("08:" in result_item.start_date or "09:" in result_item.start_date or "10:" in result_item.start_date or "11:" in result_item.start_date or "12:" in result_item.start_date or "13:" in result_item.start_date or "14:" in result_item.start_date or "15:" in result_item.start_date or "16:" in result_item.start_date or "17:" in result_item.start_date or "18:" in result_item.start_date) %}
            {% if result_item.state_display != "Canceled" %}
                {% if "Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description or "Vulcan" in result_item.short_description %}
                    <!-- Groupement des releases spécifiques après 17h30 -->
                    {% if loop.first %}
                        <h3>Nighthawk, BlackBird, and Vulcan Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <br><br>
                {% endif %}
            {% endif %}
        {% endif %}
    {% endfor %}
</body>
</html>









30 : Minute (ici 30 minutes).
17 : Heure (17 heures).
* : Tous les jours du mois.
* : Tous les mois.
1 : Le jour de la semaine (1 correspond à lundi).


Hi [Recipient's Name],

I am [Your Name], the new intern at IRGETR_LON. Currently, I am working on updating the templates for change requests and release details.

I have noticed that justifications are often entered with a link to Jira, which can be time-consuming as it requires opening that platform. It would be more efficient if this information were available directly in ServiceNow.

Could we arrange a meeting to discuss this process change and the new templates to be used?

I have attached the different email templates and useful links for your reference.

Thank you in advance for your time.

Best regards,

[Your Name]
Intern, IRGETR_LON
[Your Phone Number]
[Your Email]







Bonjour à tous,

J'ai commencé à travailler sur l'amélioration de l'email d'approbation. Voici les points que j'avais notés lors de notre précédente réunion :

Suppression de la colonne "Close At".
Retrait de l'impact (nous pouvons l'enlever).
Suppression de "BAU" et du statut "Cancelled".
Création d'un modèle plus ergonomique.
Détermination de l'affichage du bouton d'approbation directement dans l'email (en lien avec ServiceNow).
Détail de la procédure de rollback pour les cas où des modifications doivent être annulées.
Si vous avez des suggestions supplémentaires, je suis preneur. Je vous renvoie également le modèle d'email de base en copie pour référence.

Merci d'avance pour vos retours.




<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 11px;
        }
        h1 {
            font-size: 18px; /* Adjusted size for "Hi" */
        }
        h3 {
            color: MediumSeaGreen;
        }
        p, h5 {
            color: black;
            margin-left: 20px;
        }
        a {
            color: mediumblue;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <h1>Hi,</h1>
    <p style="font-size: 14px;">Please see below for the details of releases happening on the EU platform today.</p>

    <!-- Section for releases implemented early today -->
    <h3 style="color:MediumSeaGreen;">We implemented them early today:</h3>
    {% for result_item in result %}
        {% if "08:" in result_item.start_date or "09:" in result_item.start_date or "10:" in result_item.start_date or "11:" in result_item.start_date or "12:" in result_item.start_date or "13:" in result_item.start_date or "14:" in result_item.start_date %}
            {% if result_item.state_display != "Canceled" %}
                {% if "Nighthawk" not in result_item.short_description and "BlackBird" not in result_item.short_description and "Vulcan" not in result_item.short_description %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p><strong>Justification:</strong> {{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
                    <br><br>
                {% endif %}
            {% endif %}
        {% endif %}
    {% endfor %}

    <!-- Section for releases implemented on or after 17:30 -->
    <h3 style="color:MediumSeaGreen;">We will implement on or after 17:30 LDN time:</h3>
    {% for result_item in result %}
        {% if "15:" in result_item.start_date or "16:" in result_item.start_date or "17:" in result_item.start_date or "18:" in result_item.start_date %}
            {% if result_item.state_display != "Canceled" %}
                {% if "Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description %}
                    {% if loop.first %}
                        <h3>Nighthawk and BlackBird Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p><strong>Justification:</strong> {{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
                    <br><br>
                {% elif "Vulcan" in result_item.short_description %}
                    {% if loop.first %}
                        <h3>Vulcan Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p><strong>Justification:</strong> {{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
                    <br><br>
                {% else %}
                    {% if loop.first %}
                        <h3>Other Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p><strong>Justification:</strong> {{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">Ticket #{{ result_item.number }}</a></p>
                    <br><br>
                {% endif %}
            {% endif %}
        {% endif %}
    {% endfor %}
</body>
</html>






<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 11px;
        }
        h1 {
            font-size: 18px; /* Adjusted size for "Hi" */
        }
        h3 {
            color: MediumSeaGreen;
        }
        p, h5 {
            color: black;
            margin-left: 20px;
        }
        p {
            margin-bottom: 5px; /* Reduced space between short description and justification */
        }
        a {
            color: mediumblue;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <h1>Hi,</h1>
    <p style="font-size: 14px;">Please see below for the details of releases happening on the EU platform today.</p>

    <!-- Section for releases implemented early today -->
    <h3 style="color:MediumSeaGreen;">We implemented them early today:</h3>
    {% for result_item in result %}
        {% if "08:" in result_item.start_date or "09:" in result_item.start_date or "10:" in result_item.start_date or "11:" in result_item.start_date or "12:" in result_item.start_date or "13:" in result_item.start_date or "14:" in result_item.start_date %}
            {% if result_item.state_display != "Canceled" %}
                {% if "Nighthawk" not in result_item.short_description and "BlackBird" not in result_item.short_description and "Vulcan" not in result_item.short_description %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <br><br>
                {% endif %}
            {% endif %}
        {% endif %}
    {% endfor %}

    <!-- Section for releases implemented on or after 17:30 -->
    <h3 style="color:MediumSeaGreen;">We will implement on or after 17:30 LDN time:</h3>
    {% for result_item in result %}
        {% if "15:" in result_item.start_date or "16:" in result_item.start_date or "17:" in result_item.start_date or "18:" in result_item.start_date %}
            {% if result_item.state_display != "Canceled" %}
                {% if "Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description %}
                    {% if loop.first %}
                        <h3>Nighthawk and BlackBird Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <br><br>
                {% elif "Vulcan" in result_item.short_description %}
                    {% if loop.first %}
                        <h3>Vulcan Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <br><br>
                {% else %}
                    {% if loop.first %}
                        <h3>Other Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <br><br>
                {% endif %}
            {% endif %}
        {% endif %}
    {% endfor %}
</body>
</html>






<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 11px;
        }
        h1 {
            font-size: 18px; /* Adjusted size for "Hi" */
        }
        h3 {
            color: MediumSeaGreen;
        }
        h5 {
            color: black;
            margin-left: 20px;
            margin-bottom: 5px; /* Reduced space below short description */
        }
        p {
            color: black;
            margin-left: 20px;
            margin-top: 0; /* Reduced space above justification and ticket */
            margin-bottom: 2px; /* Reduced space below justification and ticket */
        }
        a {
            color: mediumblue;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <h1>Hi,</h1>
    <p style="font-size: 14px;">Please see below for the details of releases happening on the EU platform today.</p>

    <!-- Section for releases implemented early today -->
    <h3 style="color:MediumSeaGreen;">We implemented them early today:</h3>
    {% for result_item in result %}
        {% if "08:" in result_item.start_date or "09:" in result_item.start_date or "10:" in result_item.start_date or "11:" in result_item.start_date or "12:" in result_item.start_date or "13:" in result_item.start_date or "14:" in result_item.start_date %}
            {% if result_item.state_display != "Canceled" %}
                {% if "Nighthawk" not in result_item.short_description and "BlackBird" not in result_item.short_description and "Vulcan" not in result_item.short_description %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <br><br>
                {% endif %}
            {% endif %}
        {% endif %}
    {% endfor %}

    <!-- Section for releases implemented on or after 17:30 -->
    <h3 style="color:MediumSeaGreen;">We will implement on or after 17:30 LDN time:</h3>
    {% for result_item in result %}
        {% if "15:" in result_item.start_date or "16:" in result_item.start_date or "17:" in result_item.start_date or "18:" in result_item.start_date %}
            {% if result_item.state_display != "Canceled" %}
                {% if "Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description %}
                    {% if loop.first %}
                        <h3>Nighthawk and BlackBird Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <br><br>
                {% elif "Vulcan" in result_item.short_description %}
                    {% if loop.first %}
                        <h3>Vulcan Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <br><br>
                {% else %}
                    {% if loop.first %}
                        <h3>Other Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <br><br>
                {% endif %}
            {% endif %}
        {% endif %}
    {% endfor %}
</body>
</html>




<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {
            font-family: Calibri, sans-serif; /* Changed font to Calibri */
            font-size: 11px; /* Set font size to 11px */
            margin: 0; /* Removed default margins */
        }
        h1 {
            font-size: 14px; /* Adjusted size for "Hi" to match the paragraph text */
            margin: 0; /* Removed margin */
        }
        h3 {
            color: MediumSeaGreen;
            margin: 0; /* Removed margin */
        }
        h5 {
            color: black;
            margin-left: 0; /* Removed left margin */
            margin-bottom: 5px; /* Reduced space below short description */
        }
        p {
            color: black;
            margin: 0; /* Removed margins before and after text */
        }
        a {
            color: mediumblue;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <h1>Hi,</h1>
    <p style="font-size: 14px;">Please see below for the details of releases happening on the EU platform today.</p>

    <!-- Section for releases implemented early today -->
    <h3>We implemented them earlier today:</h3>
    {% for result_item in result %}
        {% if "08:" in result_item.start_date or "09:" in result_item.start_date or "10:" in result_item.start_date or "11:" in result_item.start_date or "12:" in result_item.start_date or "13:" in result_item.start_date or "14:" in result_item.start_date %}
            {% if result_item.state_display != "Canceled" %}
                {% if "Nighthawk" not in result_item.short_description and "BlackBird" not in result_item.short_description and "Vulcan" not in result_item.short_description %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <br>
                {% endif %}
            {% endif %}
        {% endif %}
    {% endfor %}

    <!-- Section for releases implemented on or after 17:30 -->
    <h3>We will implement on or after 17:30 LDN time:</h3>
    {% for result_item in result %}
        {% if "15:" in result_item.start_date or "16:" in result_item.start_date or "17:" in result_item.start_date or "18:" in result_item.start_date %}
            {% if result_item.state_display != "Canceled" %}
                {% if "Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description %}
                    {% if loop.first %}
                        <h3>Nighthawk and BlackBird Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <br>
                {% elif "Vulcan" in result_item.short_description %}
                    {% if loop.first %}
                        <h3>Vulcan Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <br>
                {% else %}
                    {% if loop.first %}
                        <h3>Other Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <br>
                {% endif %}
            {% endif %}
        {% endif %}
    {% endfor %}
</body>
</html>











<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {
            font-family: Calibri, sans-serif; /* Changed font to Calibri */
            font-size: 14px; /* Increased font size to 14px */
            margin: 0; /* Removed default margins */
        }
        h1 {
            font-size: 17px; /* Increased size for "Hi" */
            margin: 0; /* Removed margin */
            font-weight: normal; /* Removed bold */
        }
        h3 {
            color: MediumSeaGreen;
            margin: 0; /* Removed margin */
        }
        h5 {
            color: black;
            margin-left: 0; /* Removed left margin */
            margin-bottom: 3px; /* Reduced space below short description */
        }
        p {
            color: black;
            margin: 0; /* Removed margins before and after text */
        }
        a {
            color: mediumblue;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <h1>Hi,</h1>
    <p style="font-size: 17px;">Please see below details of releases happening on the EU platform today.</p>

    <!-- Section for releases implemented early today -->
    <h3>We implemented earlier today:</h3>
    {% for result_item in result %}
        {% if "08:" in result_item.start_date or "09:" in result_item.start_date or "10:" in result_item.start_date or "11:" in result_item.start_date or "12:" in result_item.start_date or "13:" in result_item.start_date or "14:" in result_item.start_date %}
            {% if result_item.state_display != "Canceled" %}
                {% if "Nighthawk" not in result_item.short_description and "BlackBird" not in result_item.short_description and "Vulcan" not in result_item.short_description %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <br>
                {% endif %}
            {% endif %}
        {% endif %}
    {% endfor %}

    <!-- Section for releases implemented on or after 17:30 -->
    <h3>We will implement on or after 17:30 LDN time:</h3>
    {% for result_item in result %}
        {% if "15:" in result_item.start_date or "16:" in result_item.start_date or "17:" in result_item.start_date or "18:" in result_item.start_date %}
            {% if result_item.state_display != "Canceled" %}
                {% if "Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description %}
                    {% if loop.first %}
                        <h3>Nighthawk and BlackBird Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <br>
                {% elif "Vulcan" in result_item.short_description %}
                    {% if loop.first %}
                        <h3>Vulcan Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <br>
                {% else %}
                    {% if loop.first %}
                        <h3>Other Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <br>
                {% endif %}
            {% endif %}
        {% endif %}
    {% endfor %}
</body>
</html>





<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {
            font-family: Calibri, sans-serif; /* Changed font to Calibri */
            font-size: 16px; /* Increased font size to 16px */
            margin: 0; /* Removed default margins */
        }
        h1 {
            font-size: 19px; /* Increased size for "Hi" */
            margin: 0; /* Removed margin */
            font-weight: normal; /* Removed bold */
        }
        h3 {
            color: MediumSeaGreen;
            margin: 0; /* Removed margin */
        }
        h5 {
            color: black;
            margin-left: 0; /* Removed left margin */
            margin-bottom: 3px; /* Reduced space below short description */
        }
        p {
            color: black;
            margin: 0; /* Removed margins before and after text */
        }
        a {
            color: mediumblue;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <h1>Hi,</h1>
    <p style="font-size: 19px;">Please see below details of releases happening on the EU platform today.</p>

    <!-- Section for releases implemented early today -->
    <h3>We implemented earlier today:</h3>
    {% for result_item in result %}
        {% if "08:" in result_item.start_date or "09:" in result_item.start_date or "10:" in result_item.start_date or "11:" in result_item.start_date or "12:" in result_item.start_date or "13:" in result_item.start_date or "14:" in result_item.start_date %}
            {% if result_item.state_display != "Canceled" %}
                {% if "Nighthawk" not in result_item.short_description and "BlackBird" not in result_item.short_description and "Vulcan" not in result_item.short_description %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <br>
                {% endif %}
            {% endif %}
        {% endif %}
    {% endfor %}

    <!-- Section for releases implemented on or after 17:30 -->
    <h3>We will implement on or after 17:30 LDN time:</h3>
    {% for result_item in result %}
        {% if "15:" in result_item.start_date or "16:" in result_item.start_date or "17:" in result_item.start_date or "18:" in result_item.start_date %}
            {% if result_item.state_display != "Canceled" %}
                {% if "Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description %}
                    {% if loop.first %}
                        <h3>Nighthawk and BlackBird Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <br>
                {% elif "Vulcan" in result_item.short_description %}
                    {% if loop.first %}
                        <h3>Vulcan Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <br>
                {% else %}
                    {% if loop.first %}
                        <h3>Other Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <br>
                {% endif %}
            {% endif %}
        {% endif %}
    {% endfor %}
</body>
</html>



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {
            font-family: Calibri, sans-serif; /* Changed font to Calibri */
            font-size: 16px; /* Increased font size to 16px */
            margin: 0; /* Removed default margins */
        }
        h1 {
            font-size: 19px; /* Increased size for "Hi" */
            margin: 0; /* Removed margin */
            font-weight: normal; /* Removed bold */
            margin-bottom: 10px; /* Added margin to create space below */
        }
        h3 {
            color: MediumSeaGreen;
            margin: 0; /* Removed margin */
        }
        h5 {
            color: black;
            margin-left: 0; /* Removed left margin */
            margin-bottom: 3px; /* Reduced space below short description */
        }
        p {
            color: black;
            margin: 0; /* Removed margins before and after text */
        }
        a {
            color: mediumblue;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <h1>Hi,</h1>
    <p style="font-size: 19px;">Please see below details of releases happening on the EU platform today.</p>

    <!-- Section for releases implemented early today -->
    <h3>We implemented earlier today:</h3>
    {% for result_item in result %}
        {% if "08:" in result_item.start_date or "09:" in result_item.start_date or "10:" in result_item.start_date or "11:" in result_item.start_date or "12:" in result_item.start_date or "13:" in result_item.start_date or "14:" in result_item.start_date %}
            {% if result_item.state_display != "Canceled" %}
                {% if "Nighthawk" not in result_item.short_description and "BlackBird" not in result_item.short_description and "Vulcan" not in result_item.short_description %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                {% endif %}
            {% endif %}
        {% endif %}
    {% endfor %}

    <!-- Section for releases implemented on or after 17:30 -->
    <h3>We will implement on or after 17:30 LDN time:</h3>
    {% for result_item in result %}
        {% if "15:" in result_item.start_date or "16:" in result_item.start_date or "17:" in result_item.start_date or "18:" in result_item.start_date %}
            {% if result_item.state_display != "Canceled" %}
                {% if "Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description %}
                    {% if loop.first %}
                        <h3>Nighthawk and BlackBird Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                {% elif "Vulcan" in result_item.short_description %}
                    {% if loop.first %}
                        <h3>Vulcan Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                {% else %}
                    {% if loop.first %}
                        <h3>Other Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                {% endif %}
            {% endif %}
        {% endif %}
    {% endfor %}
</body>
</html>





<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {
            font-family: Calibri, sans-serif; /* Changed font to Calibri */
            font-size: 16px; /* Increased font size to 16px */
            margin: 0; /* Removed default margins */
        }
        h1 {
            font-size: 19px; /* Increased size for "Hi" */
            margin: 0; /* Removed margin */
            font-weight: normal; /* Removed bold */
        }
        h3 {
            color: MediumSeaGreen;
            margin: 0; /* Removed margin */
        }
        h5 {
            color: black;
            margin-left: 0; /* Removed left margin */
            margin-bottom: 3px; /* Reduced space below short description */
        }
        p {
            color: black;
            margin: 0; /* Removed margins before and after text */
        }
        a {
            color: mediumblue;
            text-decoration: none;
        }
        .spacer {
            height: 10px; /* Adjust height to control space */
        }
    </style>
</head>
<body>
    <h1>Hi,</h1>
    <div class="spacer"></div> <!-- Spacer after "Hi," -->

    <p style="font-size: 19px;">Please see below details of releases happening on the EU platform today.</p>
    <div class="spacer"></div> <!-- Spacer after the paragraph -->

    <!-- Section for releases implemented early today -->
    <h3>We implemented earlier today:</h3>
    {% for result_item in result %}
        {% if "08:" in result_item.start_date or "09:" in result_item.start_date or "10:" in result_item.start_date or "11:" in result_item.start_date or "12:" in result_item.start_date or "13:" in result_item.start_date or "14:" in result_item.start_date %}
            {% if result_item.state_display != "Canceled" %}
                {% if "Nighthawk" not in result_item.short_description and "BlackBird" not in result_item.short_description and "Vulcan" not in result_item.short_description %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <div class="spacer"></div> <!-- Spacer between entries -->
                {% endif %}
            {% endif %}
        {% endif %}
    {% endfor %}

    <!-- Section for releases implemented on or after 17:30 -->
    <h3>We will implement on or after 17:30 LDN time:</h3>
    {% for result_item in result %}
        {% if "15:" in result_item.start_date or "16:" in result_item.start_date or "17:" in result_item.start_date or "18:" in result_item.start_date %}
            {% if result_item.state_display != "Canceled" %}
                {% if "Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description %}
                    {% if loop.first %}
                        <h3>Nighthawk and BlackBird Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <div class="spacer"></div> <!-- Spacer between entries -->
                {% elif "Vulcan" in result_item.short_description %}
                    {% if loop.first %}
                        <h3>Vulcan Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <div class="spacer"></div> <!-- Spacer between entries -->
                {% else %}
                    {% if loop.first %}
                        <h3>Other Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                    <div class="spacer"></div> <!-- Spacer between entries -->
                {% endif %}
            {% endif %}
        {% endif %}
    {% endfor %}
</body>
</html>



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {
            font-family: Calibri, sans-serif; /* Changed font to Calibri */
            font-size: 16px; /* Increased font size to 16px */
            margin: 0; /* Removed default margins */
        }
        h1 {
            font-size: 19px; /* Increased size for "Hi" */
            margin: 0; /* Removed margin */
            font-weight: normal; /* Removed bold */
            margin-bottom: 10px; /* Added margin to create space below */
        }
        h3 {
            color: MediumSeaGreen;
            margin: 0; /* Removed margin */
            margin-top: 20px; /* Added margin to create space above */
        }
        h5 {
            color: black;
            margin-left: 0; /* Removed left margin */
            margin-bottom: 3px; /* Reduced space below short description */
        }
        p {
            color: black;
            margin: 0; /* Removed margins before and after text */
        }
        a {
            color: mediumblue;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <h1>Hi,</h1>
    <p style="font-size: 19px; margin-bottom: 20px;">Please see below details of releases happening on the EU platform today.</p>

    <!-- Section for releases implemented early today -->
    <h3>We implemented earlier today:</h3>
    {% for result_item in result %}
        {% if "08:" in result_item.start_date or "09:" in result_item.start_date or "10:" in result_item.start_date or "11:" in result_item.start_date or "12:" in result_item.start_date or "13:" in result_item.start_date or "14:" in result_item.start_date %}
            {% if result_item.state_display != "Canceled" %}
                {% if "Nighthawk" not in result_item.short_description and "BlackBird" not in result_item.short_description and "Vulcan" not in result_item.short_description %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                {% endif %}
            {% endif %}
        {% endif %}
    {% endfor %}

    <!-- Section for releases implemented on or after 17:30 -->
    <h3>We will implement on or after 17:30 LDN time:</h3>
    {% for result_item in result %}
        {% if "15:" in result_item.start_date or "16:" in result_item.start_date or "17:" in result_item.start_date or "18:" in result_item.start_date %}
            {% if result_item.state_display != "Canceled" %}
                {% if "Nighthawk" in result_item.short_description or "BlackBird" in result_item.short_description %}
                    {% if loop.first %}
                        <h3>Nighthawk and BlackBird Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                {% elif "Vulcan" in result_item.short_description %}
                    {% if loop.first %}
                        <h3>Vulcan Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                {% else %}
                    {% if loop.first %}
                        <h3>Other Releases</h3>
                    {% endif %}
                    <h5>{{ result_item.short_description }}</h5>
                    <p>{{ result_item.justification }}</p>
                    <p><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ result_item.sys_id }}">{{ result_item.number }}</a></p>
                {% endif %}
            {% endif %}
        {% endif %}
    {% endfor %}
</body>
</html>








<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 16px;
            margin: 0;
        }
        h1, h3 {
            color: MediumSeaGreen;
        }
        h1 {
            font-size: 24px;
            margin-bottom: 10px;
        }
        h3 {
            font-size: 18px;
            margin-bottom: 10px;
        }
        table {
            border: 1px solid black;
            border-collapse: collapse;
            width: 100%;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid black;
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #f4f4f4;
        }
    </style>
</head>
<body>
    <h1>Release Notes for Today</h1>

    <h3>Releases</h3>
    <table>
        <thead>
            <tr>
                <th>Number</th>
                <th>Status</th>
                <th>Short Description</th>
                <th>Implementation</th>
                <th>Rollback</th>
            </tr>
        </thead>
        <tbody>
            {% for release in releases %}
                {% if release.state_display != "Canceled" and release.risk_impact_analysis != "BAU" %}
                    <tr>
                        <td><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ release.sys_id }}">{{ release.number }}</a></td>
                        <td>{{ release.state_display }}</td>
                        <td>{{ release.short_description }}</td>
                        <td>{{ release.implementation_plan }}</td>
                        <td>{{ release.backout_plan }}</td>
                    </tr>
                {% endif %}
            {% endfor %}
        </tbody>
    </table>

    {% if releases|length == 0 %}
    <p>No releases to display.</p>
    {% endif %}
</body>
</html>






<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Release Information</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 16px;
            margin: 0;
        }
        h1, h3 {
            color: MediumSeaGreen;
        }
        h1 {
            font-size: 24px;
            margin-bottom: 10px;
        }
        h3 {
            font-size: 18px;
            margin-bottom: 10px;
        }
        table {
            border: 1px solid black;
            border-collapse: collapse;
            width: 100%;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid black;
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #f4f4f4;
        }
    </style>
</head>
<body>
    <h1>Release Notes for Today</h1>

    <h3>Releases</h3>
    <table>
        <thead>
            <tr>
                <th>Number</th>
                <th>Status</th>
                <th>Short Description</th>
                <th>Impact</th>
                <th>Implementation</th>
                <th>Rollback</th>
            </tr>
        </thead>
        <tbody>
            {% for release in releases %}
                {% if release.state_display != "Canceled" %}
                    <tr>
                        <td><a href="https://bpp.service-now.com/now/nav/ui/classic/params/target/change_request.do?sys_id={{ release.sys_id }}">{{ release.number }}</a></td>
                        <td>{{ release.state_display }}</td>
                        <td>{{ release.short_description }}</td>
                        <td>{{ release.risk_impact_analysis }}</td>
                        <td>{{ release.implementation_plan }}</td>
                        <td>{{ release.backout_plan }}</td>
                    </tr>
                {% endif %}
            {% endfor %}
        </tbody>
    </table>

    {% if releases|length == 0 %}
    <p>No releases to display.</p>
    {% endif %}
</body>
</html>








import datetime
import ast

def get_flexible_changes(fields="", conditions="", since_hours=72, until_hours=0, limit=50, dates_criteria=None):
    # Vérification si aucune condition n'est présente
    if not conditions:
        return "[ERROR] No condition found"

    # Calcul des dates minimum (min_date) et maximum (max_date) pour récupérer les données des 72 dernières heures
    min_date = (datetime.datetime.now(datetime.timezone.utc) - datetime.timedelta(hours=int(since_hours))).strftime("%Y-%m-%d %H:%M:%S")
    max_date = (datetime.datetime.now(datetime.timezone.utc) + datetime.timedelta(hours=int(until_hours))).strftime("%Y-%m-%d %H:%M:%S")

    # Construction des conditions pour min_date et max_date
    conditions += (
        f" AND ((start_date != '' AND start_date >= '{min_date}') OR "
        f"(work_start != '' AND work_start >= '{min_date}') OR "
        f"(work_end != '' AND work_end >= '{min_date}'))"
    )

    conditions += (
        f" AND ((start_date != '' AND start_date <= '{max_date}') OR "
        f"(work_start != '' AND work_start <= '{max_date}') OR "
        f"(work_end != '' AND work_end <= '{max_date}'))"
    )

    # Construction des critères de dates (start_date, end_date, etc.)
    if not dates_criteria:
        dates_criteria = ["start_date", "end_date", "closed_at"]  # Critères par défaut
    elif isinstance(dates_criteria, str):
        if len(dates_criteria) < 2:
            return "[ERROR] Dates criteria not correct"
        elif dates_criteria[0] == "(" and dates_criteria[-1] == ")":
            dates_criteria = ast.literal_eval(dates_criteria)
        else:
            try:
                temp_dates_criteria = dates_criteria.split(",")
                dates_criteria = [item.strip() for item in temp_dates_criteria]
            except:
                return "[ERROR] Dates criteria not correct"

    # Ajout des conditions pour récupérer les données uniquement de vendredi, samedi, et dimanche
    conditions += " AND ("
    for criteria in dates_criteria:
        conditions += f"(DAYOFWEEK({criteria}) IN (6, 7, 1)) OR "  # 6 = vendredi, 7 = samedi, 1 = dimanche
    conditions = conditions[:-4] + ")"  # Suppression du dernier "OR" en trop

    # Imprimer les conditions générées (pour débogage)
    print("Generated conditions:", conditions)

    # Appel de la fonction qui exécute la requête (fonction fictive à titre d'exemple)
    return select_flexible("change_request", conditions, fields, limit)

def select_flexible(table, conditions, fields, limit):
    # Ici, tu mettras ta logique pour interroger la base de données et retourner les résultats.
    # Exemple fictif de données récupérées pour simuler le processus
    print(f"Executing query on {table} with conditions: {conditions}")
    return [
        {"short_description": "Release 1", "start_date": "2023-09-22 09:00:00", "state": "active", "sys_id": "12345"},
        {"short_description": "Release 2", "start_date": "2023-09-23 11:00:00", "state": "active", "sys_id": "67890"},
        {"short_description": "Release 3", "start_date": "2023-09-24 15:00:00", "state": "active", "sys_id": "54321"}
    ]

# Appel de la fonction pour récupérer les données de vendredi, samedi et dimanche
result = get_flexible_changes(conditions="status='active'", since_hours=72, until_hours=0, limit=50)
print(result)


